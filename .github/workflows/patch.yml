name: patch

on: workflow_dispatch

#on:  
  #schedule:
  # - cron: "0 13 * * 1"

jobs:
  makepatch:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v5
      - name: Set current tag
        run: echo "CURRENT_TAG=`echo $(git describe --tags --abbrev=0)`" >> $GITHUB_ENV
      - run: echo $CURRENT_TAG
      - name: Get commits count
        run: echo "COMMIT_COUNT=`echo $(git rev-list --count $CURRENT_TAG..master)`" >> $GITHUB_ENV
      - run: echo $COMMIT_COUNT
      - if: ${{env.COMMIT_COUNT >= 5}}
        run: echo $CURRENT_TAG | awk 'BEGIN{FS=OFS="."} {$3+=1} 1'

  
